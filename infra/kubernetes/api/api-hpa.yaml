apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: hpa-api
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: backend-api
  minReplicas: 2
  maxReplicas: 10
#  targetCPUUtilizationPercentage: 50
#  targetMemoryUtilizationPercentage: 70
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 80
    - type: Resource
      resource:
        name: memory
        target:
          type: Utilization
          averageUtilization: 80
#status:
#  observedGeneration: 1
##  lastScaleTime: <some-time>
#  currentReplicas: 2
#  desiredReplicas: 5
#  currentMetrics:
#    - type: Resource
#      resource:
#        name: cpu
#        current:
#          averageUtilization: 0
#          averageValue: 0